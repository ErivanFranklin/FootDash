<app-page-header title="FootDash">
</app-page-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Dashboard</ion-title>
    </ion-toolbar>
  </ion-header>

  <div id="container" style="padding: 12px;">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <app-stat-card
        label="Fixtures Loaded"
        [value]="fixtures.length"
        icon="football"
        variant="primary">
      </app-stat-card>
      <app-stat-card
        label="API Status"
        [value]="pingResult ? 'Connected' : 'Not Tested'"
        icon="cloud-done"
        variant="success">
      </app-stat-card>
    </div>

    <app-form-section title="API Testing">
      <ion-button (click)="pingBackend()" size="small">Ping API</ion-button>
      <ion-spinner *ngIf="loading" name="dots"></ion-spinner>
    </app-form-section>

    <app-form-section title="Match Parameters">
      <ion-item>
        <ion-label position="stacked">Team ID</ion-label>
        <ion-input type="number" [(ngModel)]="teamId"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Season</ion-label>
        <ion-input type="number" [(ngModel)]="season"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Limit</ion-label>
        <ion-input type="number" [(ngModel)]="limit"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Range</ion-label>
        <ion-input [(ngModel)]="range" placeholder="recent|upcoming|all"></ion-input>
      </ion-item>
      <ion-button (click)="fetchMatches()" expand="block" style="margin-top: 12px;">Fetch Matches</ion-button>
    </app-form-section>

    <app-form-section title="API Results">
      <ion-list>
        <ion-item lines="full"><ion-label>Ping Result</ion-label></ion-item>
        <pre style="white-space: pre-wrap;">{{ pingResult | json }}</pre>
      </ion-list>
    </app-form-section>

    <app-form-section title="Fixtures ({{ fixtures.length || 0 }})">
      <div *ngIf="!fixtures.length" style="padding: 8px; color: var(--ion-color-medium);">No fixtures loaded yet.</div>
      <app-match-card
        *ngFor="let match of fixtures"
        [match]="match">
      </app-match-card>
    </app-form-section>
  </div>
</ion-content>
